<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ThumbnailBuilder - Create v3</title>
    <link rel="stylesheet" href="design-system.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* =====================================================================
           CREATE V3 - Premium Workspace Layout
           ===================================================================== */

        /* Top Bar */
        .top-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 var(--space-5);
            background: var(--color-surface-glass);
            backdrop-filter: var(--glass-blur-md);
            -webkit-backdrop-filter: var(--glass-blur-md);
            border-bottom: 1px solid var(--color-border-subtle);
            z-index: var(--z-sticky);
        }

        .top-bar__left {
            display: flex;
            align-items: center;
            gap: var(--space-4);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            text-decoration: none;
        }

        .logo__icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--color-primary) 0%, #E64D00 100%);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo__icon svg {
            width: 20px;
            height: 20px;
            color: white;
        }

        .logo__text {
            font-size: var(--text-lg);
            font-weight: var(--weight-semibold);
            color: var(--color-text-primary);
            letter-spacing: var(--tracking-tight);
        }

        .top-bar__title {
            font-size: var(--text-sm);
            color: var(--color-text-secondary);
            padding-left: var(--space-4);
            border-left: 1px solid var(--color-border-subtle);
        }

        .top-bar__right {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        /* Main Layout */
        .app-layout {
            display: grid;
            grid-template-columns: 220px 1fr 340px;
            gap: var(--space-5);
            min-height: 100vh;
            padding: calc(64px + var(--space-5)) var(--space-5) var(--space-5);
            background: var(--color-bg-base);
        }

        @media (max-width: 1400px) {
            .app-layout {
                grid-template-columns: 200px 1fr 300px;
                gap: var(--space-4);
            }
        }

        @media (max-width: 1024px) {
            .app-layout {
                grid-template-columns: 1fr;
                padding: calc(64px + var(--space-4)) var(--space-4) var(--space-4);
            }

            .sidebar-left {
                display: none;
            }

            .sidebar-right {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                max-height: 50vh;
                z-index: var(--z-overlay);
            }
        }

        /* Left Sidebar - Stepper */
        .sidebar-left {
            position: sticky;
            top: calc(64px + var(--space-5));
            height: fit-content;
            max-height: calc(100vh - 64px - var(--space-10));
        }

        .stepper-panel {
            padding: var(--space-5);
        }

        .stepper-header {
            margin-bottom: var(--space-6);
            padding-bottom: var(--space-4);
            border-bottom: 1px solid var(--color-border-subtle);
        }

        .stepper-header__title {
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--color-text-tertiary);
            text-transform: uppercase;
            letter-spacing: var(--tracking-wider);
        }

        /* Main Content Area */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: var(--space-5);
            min-width: 0;
        }

        /* Preview Canvas */
        .preview-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 500px;
        }

        .preview-canvas {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-6);
            position: relative;
        }

        .preview-frame {
            position: relative;
            width: 100%;
            max-width: 854px;
            aspect-ratio: 16 / 9;
            background: var(--color-bg-elevated);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-xl);
        }

        .preview-frame__image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .preview-frame__placeholder {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: var(--space-4);
            color: var(--color-text-tertiary);
        }

        .preview-frame__placeholder-icon {
            width: 64px;
            height: 64px;
            opacity: 0.5;
        }

        .preview-frame__placeholder-text {
            font-size: var(--text-sm);
            text-align: center;
        }

        /* Safe Frame Overlay */
        .safe-frame-overlay {
            position: absolute;
            inset: 0;
            pointer-events: none;
            z-index: var(--z-raised);
            opacity: 0;
            transition: opacity var(--transition-normal);
        }

        .safe-frame-overlay.visible {
            opacity: 1;
        }

        .safe-frame-border {
            position: absolute;
            top: 5%;
            left: 3%;
            right: 3%;
            bottom: 5%;
            border: 1px dashed rgba(255, 85, 0, 0.4);
            border-radius: var(--radius-sm);
        }

        .safe-frame-corner {
            position: absolute;
            width: 20px;
            height: 20px;
            border: 2px solid var(--color-primary);
            opacity: 0.6;
        }

        .safe-frame-corner--tl { top: 5%; left: 3%; border-right: none; border-bottom: none; }
        .safe-frame-corner--tr { top: 5%; right: 3%; border-left: none; border-bottom: none; }
        .safe-frame-corner--bl { bottom: 5%; left: 3%; border-right: none; border-top: none; }
        .safe-frame-corner--br { bottom: 5%; right: 3%; border-left: none; border-top: none; }

        /* YouTube Duration Danger Zone */
        .danger-zone {
            position: absolute;
            bottom: 8%;
            right: 4%;
            width: 80px;
            height: 28px;
            background: rgba(255, 61, 113, 0.2);
            border: 1px dashed var(--color-error);
            border-radius: var(--radius-xs);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .danger-zone__label {
            font-size: 9px;
            color: var(--color-error);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Text Preview Overlay */
        .text-preview-overlay {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
            padding: var(--space-6);
        }

        .text-preview-overlay__text {
            font-size: clamp(28px, 5vw, 56px);
            font-weight: var(--weight-bold);
            color: white;
            text-shadow:
                3px 3px 0 #000,
                -1px -1px 0 #000,
                1px -1px 0 #000,
                -1px 1px 0 #000,
                0 4px 8px rgba(0, 0, 0, 0.5);
            text-align: center;
            text-transform: uppercase;
            letter-spacing: var(--tracking-tight);
            opacity: 0;
            transition: opacity var(--transition-normal);
        }

        .text-preview-overlay__text.visible {
            opacity: 1;
        }

        /* Variant Strip */
        .variant-strip-section {
            flex-shrink: 0;
        }

        .variant-strip-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-4) var(--space-5);
            border-bottom: 1px solid var(--color-border-subtle);
        }

        .variant-strip-header__title {
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--color-text-secondary);
        }

        .variant-strip-header__count {
            font-size: var(--text-xs);
            color: var(--color-text-tertiary);
        }

        .variant-strip {
            display: flex;
            gap: var(--space-3);
            padding: var(--space-4) var(--space-5);
            overflow-x: auto;
            scrollbar-width: none;
        }

        .variant-strip::-webkit-scrollbar {
            display: none;
        }

        .variant-card {
            position: relative;
            flex-shrink: 0;
            width: 160px;
            aspect-ratio: 16 / 9;
            background: var(--color-bg-elevated);
            border: 2px solid transparent;
            border-radius: var(--radius-md);
            overflow: hidden;
            cursor: pointer;
            transition:
                border-color var(--transition-fast),
                transform var(--transition-fast),
                box-shadow var(--transition-fast);
        }

        .variant-card:hover {
            border-color: var(--color-border-strong);
            transform: translateY(-2px);
        }

        .variant-card.active {
            border-color: var(--color-primary);
            box-shadow: var(--glow-primary-sm);
        }

        .variant-card__image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .variant-card__actions {
            position: absolute;
            top: var(--space-2);
            right: var(--space-2);
            display: flex;
            gap: var(--space-1);
            opacity: 0;
            transition: opacity var(--transition-fast);
        }

        .variant-card:hover .variant-card__actions {
            opacity: 1;
        }

        .variant-card__star {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.6);
            border: none;
            border-radius: var(--radius-sm);
            color: var(--color-text-tertiary);
            cursor: pointer;
            transition: color var(--transition-fast);
        }

        .variant-card__star:hover,
        .variant-card__star.favorited {
            color: var(--color-warning);
        }

        .variant-card__label {
            position: absolute;
            bottom: var(--space-2);
            left: var(--space-2);
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            color: white;
            background: rgba(0, 0, 0, 0.6);
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-xs);
        }

        /* Empty Variant Strip State */
        .variant-strip__empty {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: var(--space-8);
            color: var(--color-text-tertiary);
            text-align: center;
        }

        .variant-strip__empty-icon {
            width: 48px;
            height: 48px;
            margin-bottom: var(--space-3);
            opacity: 0.5;
        }

        .variant-strip__empty-text {
            font-size: var(--text-sm);
        }

        /* Right Sidebar */
        .sidebar-right {
            position: sticky;
            top: calc(64px + var(--space-5));
            height: fit-content;
            max-height: calc(100vh - 64px - var(--space-10));
            overflow-y: auto;
        }

        .control-panel {
            padding: var(--space-5);
        }

        .control-panel__header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-5);
            padding-bottom: var(--space-4);
            border-bottom: 1px solid var(--color-border-subtle);
        }

        .control-panel__title {
            font-size: var(--text-lg);
            font-weight: var(--weight-semibold);
            color: var(--color-text-primary);
        }

        .control-panel__badge {
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            color: var(--color-primary);
            background: var(--color-primary-muted);
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-full);
        }

        .control-section {
            margin-bottom: var(--space-6);
        }

        .control-section:last-child {
            margin-bottom: 0;
        }

        .control-section__label {
            display: block;
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            color: var(--color-text-tertiary);
            text-transform: uppercase;
            letter-spacing: var(--tracking-wider);
            margin-bottom: var(--space-3);
        }

        /* Step Content Panels */
        .step-panel {
            display: none;
            animation: fadeIn var(--duration-normal) var(--ease-out);
        }

        .step-panel.active {
            display: block;
        }

        /* =====================================================================
           STEP 1: FACE UPLOAD
           ===================================================================== */

        .upload-zone {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: var(--space-4);
            padding: var(--space-10);
            background: var(--color-surface-glass-dark);
            border: 2px dashed var(--color-border-default);
            border-radius: var(--radius-xl);
            cursor: pointer;
            transition:
                border-color var(--transition-fast),
                background-color var(--transition-fast);
            min-height: 280px;
        }

        .upload-zone:hover,
        .upload-zone.dragging {
            border-color: var(--color-primary);
            background: var(--color-primary-muted);
        }

        .upload-zone.dragging {
            border-style: solid;
        }

        .upload-zone__icon {
            width: 56px;
            height: 56px;
            color: var(--color-text-tertiary);
            transition: color var(--transition-fast);
        }

        .upload-zone:hover .upload-zone__icon {
            color: var(--color-primary);
        }

        .upload-zone__title {
            font-size: var(--text-lg);
            font-weight: var(--weight-semibold);
            color: var(--color-text-primary);
            text-align: center;
        }

        .upload-zone__subtitle {
            font-size: var(--text-sm);
            color: var(--color-text-secondary);
            text-align: center;
            max-width: 300px;
        }

        .upload-zone__hint {
            font-size: var(--text-xs);
            color: var(--color-text-muted);
        }

        /* Face Gallery */
        .face-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: var(--space-4);
            margin-top: var(--space-5);
        }

        .face-card {
            position: relative;
            aspect-ratio: 1;
            background: var(--color-bg-elevated);
            border: 2px solid var(--color-border-subtle);
            border-radius: var(--radius-lg);
            overflow: hidden;
            transition: border-color var(--transition-fast);
        }

        .face-card:hover {
            border-color: var(--color-border-default);
        }

        .face-card__image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .face-card__status {
            position: absolute;
            bottom: var(--space-2);
            left: var(--space-2);
            right: var(--space-2);
            padding: var(--space-1) var(--space-2);
            background: rgba(0, 0, 0, 0.7);
            border-radius: var(--radius-xs);
            font-size: var(--text-xs);
            text-align: center;
        }

        .face-card__status--good {
            color: var(--color-success);
        }

        .face-card__status--uploading {
            color: var(--color-warning);
        }

        .face-card__status--error {
            color: var(--color-error);
        }

        .face-card__remove {
            position: absolute;
            top: var(--space-2);
            right: var(--space-2);
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 61, 113, 0.9);
            border: none;
            border-radius: var(--radius-full);
            color: white;
            cursor: pointer;
            opacity: 0;
            transition: opacity var(--transition-fast);
        }

        .face-card:hover .face-card__remove {
            opacity: 1;
        }

        /* Face Count Indicator */
        .face-count {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-4);
            background: var(--color-surface-glass-dark);
            border-radius: var(--radius-md);
            margin-top: var(--space-4);
        }

        .face-count__progress {
            flex: 1;
            height: 6px;
            background: var(--color-bg-elevated);
            border-radius: var(--radius-full);
            overflow: hidden;
        }

        .face-count__bar {
            height: 100%;
            background: var(--color-primary);
            border-radius: var(--radius-full);
            transition: width var(--transition-normal);
        }

        .face-count__bar.complete {
            background: var(--color-success);
        }

        .face-count__text {
            font-size: var(--text-sm);
            color: var(--color-text-secondary);
            white-space: nowrap;
        }

        /* =====================================================================
           STEP 2: STYLE SELECTION
           ===================================================================== */

        .style-section {
            margin-bottom: var(--space-6);
        }

        .style-section__title {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--color-text-primary);
            margin-bottom: var(--space-4);
        }

        /* Niche Grid */
        .niche-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: var(--space-3);
        }

        @media (max-width: 1200px) {
            .niche-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (max-width: 900px) {
            .niche-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .niche-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-4);
            background: var(--color-surface-glass-dark);
            border: 2px solid transparent;
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition:
                border-color var(--transition-fast),
                background-color var(--transition-fast),
                transform var(--transition-fast);
        }

        .niche-card:hover {
            background: var(--color-surface-glass);
            transform: translateY(-2px);
        }

        .niche-card.selected {
            border-color: var(--color-primary);
            background: var(--color-primary-muted);
        }

        .niche-card__icon {
            font-size: 24px;
        }

        .niche-card__label {
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            color: var(--color-text-secondary);
            text-align: center;
        }

        .niche-card.selected .niche-card__label {
            color: var(--color-primary);
        }

        /* Expression Grid */
        .expression-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-3);
        }

        @media (max-width: 900px) {
            .expression-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .expression-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-4);
            background: var(--color-surface-glass-dark);
            border: 2px solid transparent;
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition:
                border-color var(--transition-fast),
                background-color var(--transition-fast),
                transform var(--transition-fast);
        }

        .expression-card:hover {
            background: var(--color-surface-glass);
            transform: translateY(-2px);
        }

        .expression-card.selected {
            border-color: var(--color-accent-purple);
            background: var(--color-accent-purple-muted);
        }

        .expression-card__emoji {
            font-size: 32px;
        }

        .expression-card__label {
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            color: var(--color-text-secondary);
        }

        .expression-card.selected .expression-card__label {
            color: var(--color-accent-purple-soft);
        }

        /* Creator Style Selector */
        .creator-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: var(--space-3);
        }

        @media (max-width: 1200px) {
            .creator-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .creator-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-4);
            background: var(--color-surface-glass-dark);
            border: 2px solid transparent;
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition:
                border-color var(--transition-fast),
                background-color var(--transition-fast);
        }

        .creator-card:hover {
            background: var(--color-surface-glass);
        }

        .creator-card.selected {
            border-color: var(--color-accent-cyan);
            background: var(--color-accent-cyan-muted);
        }

        .creator-card__avatar {
            width: 48px;
            height: 48px;
            background: var(--color-bg-elevated);
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-lg);
            font-weight: var(--weight-bold);
            color: var(--color-text-tertiary);
        }

        .creator-card.selected .creator-card__avatar {
            background: var(--color-accent-cyan);
            color: white;
        }

        .creator-card__name {
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            color: var(--color-text-secondary);
            text-align: center;
        }

        /* =====================================================================
           STEP 3: TEXT & CONTENT
           ===================================================================== */

        .content-form {
            display: flex;
            flex-direction: column;
            gap: var(--space-5);
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
        }

        .input-group__label {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .input-group__label-text {
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--color-text-secondary);
        }

        .input-group__counter {
            font-size: var(--text-xs);
            color: var(--color-text-muted);
            font-variant-numeric: tabular-nums;
        }

        .input-group__counter.warning {
            color: var(--color-warning);
        }

        .input-group__counter.error {
            color: var(--color-error);
        }

        .input-group__hint {
            font-size: var(--text-xs);
            color: var(--color-text-muted);
        }

        .input-group__warning {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            font-size: var(--text-xs);
            color: var(--color-warning);
            padding: var(--space-2) var(--space-3);
            background: var(--color-warning-muted);
            border-radius: var(--radius-sm);
        }

        /* Quick Suggestion Chips */
        .chip-group {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-2);
        }

        .chip {
            padding: var(--space-2) var(--space-3);
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            color: var(--color-text-secondary);
            background: var(--color-surface-glass-dark);
            border: 1px solid var(--color-border-subtle);
            border-radius: var(--radius-full);
            cursor: pointer;
            transition:
                background-color var(--transition-fast),
                border-color var(--transition-fast),
                color var(--transition-fast);
        }

        .chip:hover {
            background: var(--color-surface-glass);
            border-color: var(--color-border-default);
            color: var(--color-text-primary);
        }

        /* Logo Upload Section */
        .logo-section {
            padding: var(--space-4);
            background: var(--color-surface-glass-dark);
            border-radius: var(--radius-lg);
        }

        .logo-section__header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-3);
        }

        .logo-section__title {
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--color-text-secondary);
        }

        .logo-gallery {
            display: flex;
            gap: var(--space-3);
        }

        .logo-card {
            width: 64px;
            height: 64px;
            background: var(--color-bg-elevated);
            border: 2px solid var(--color-border-subtle);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: border-color var(--transition-fast);
        }

        .logo-card:hover {
            border-color: var(--color-border-default);
        }

        .logo-card--add {
            border-style: dashed;
            color: var(--color-text-tertiary);
        }

        .logo-card--add:hover {
            border-color: var(--color-primary);
            color: var(--color-primary);
        }

        .logo-position-presets {
            display: flex;
            gap: var(--space-2);
            margin-top: var(--space-3);
        }

        .position-preset {
            padding: var(--space-2) var(--space-3);
            font-size: var(--text-xs);
            color: var(--color-text-tertiary);
            background: var(--color-bg-elevated);
            border: 1px solid transparent;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .position-preset:hover {
            color: var(--color-text-secondary);
        }

        .position-preset.active {
            border-color: var(--color-primary);
            color: var(--color-primary);
            background: var(--color-primary-muted);
        }

        /* =====================================================================
           STEP 4: GENERATE
           ===================================================================== */

        .generate-section {
            text-align: center;
            padding: var(--space-10);
        }

        .generate-section__title {
            font-size: var(--text-2xl);
            font-weight: var(--weight-bold);
            color: var(--color-text-primary);
            margin-bottom: var(--space-4);
        }

        .generate-section__subtitle {
            font-size: var(--text-base);
            color: var(--color-text-secondary);
            margin-bottom: var(--space-8);
        }

        .generate-button {
            min-width: 280px;
        }

        /* Generation Progress */
        .generation-progress {
            padding: var(--space-10);
            text-align: center;
        }

        .generation-progress__spinner {
            width: 80px;
            height: 80px;
            border: 4px solid var(--color-border-subtle);
            border-top-color: var(--color-primary);
            border-radius: var(--radius-full);
            animation: spin 1s linear infinite;
            margin: 0 auto var(--space-6);
        }

        .generation-progress__status {
            font-size: var(--text-xl);
            font-weight: var(--weight-semibold);
            color: var(--color-text-primary);
            margin-bottom: var(--space-2);
        }

        .generation-progress__substatus {
            font-size: var(--text-sm);
            color: var(--color-text-tertiary);
            margin-bottom: var(--space-6);
        }

        .generation-progress__bar {
            width: 100%;
            max-width: 400px;
            height: 6px;
            background: var(--color-bg-elevated);
            border-radius: var(--radius-full);
            margin: 0 auto;
            overflow: hidden;
        }

        .generation-progress__fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-primary), var(--color-accent-purple));
            border-radius: var(--radius-full);
            transition: width var(--duration-slow) var(--ease-out);
        }

        /* Generated Variants Grid */
        .variants-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: var(--space-5);
            margin-top: var(--space-6);
        }

        .variant-preview-card {
            position: relative;
            background: var(--color-bg-elevated);
            border: 2px solid transparent;
            border-radius: var(--radius-lg);
            overflow: hidden;
            cursor: pointer;
            transition:
                border-color var(--transition-fast),
                transform var(--transition-fast),
                box-shadow var(--transition-fast);
        }

        .variant-preview-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .variant-preview-card.selected {
            border-color: var(--color-primary);
            box-shadow: var(--glow-primary-sm);
        }

        .variant-preview-card__image {
            width: 100%;
            aspect-ratio: 16 / 9;
            object-fit: cover;
        }

        .variant-preview-card__footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-3) var(--space-4);
        }

        .variant-preview-card__label {
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--color-text-secondary);
        }

        .variant-preview-card__star {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            border: none;
            color: var(--color-text-tertiary);
            cursor: pointer;
            transition: color var(--transition-fast);
        }

        .variant-preview-card__star:hover,
        .variant-preview-card__star.favorited {
            color: var(--color-warning);
        }

        /* =====================================================================
           STEP 5: EXPORT
           ===================================================================== */

        .export-preview {
            display: flex;
            gap: var(--space-6);
            margin-bottom: var(--space-6);
        }

        @media (max-width: 900px) {
            .export-preview {
                flex-direction: column;
            }
        }

        .export-preview__image-wrapper {
            flex: 1;
            max-width: 640px;
        }

        .export-preview__image {
            width: 100%;
            aspect-ratio: 16 / 9;
            object-fit: cover;
            border-radius: var(--radius-lg);
        }

        .export-preview__info {
            flex-shrink: 0;
            width: 280px;
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
        }

        .export-info-card {
            padding: var(--space-4);
            background: var(--color-surface-glass-dark);
            border-radius: var(--radius-md);
        }

        .export-info-card__label {
            font-size: var(--text-xs);
            color: var(--color-text-tertiary);
            text-transform: uppercase;
            letter-spacing: var(--tracking-wider);
            margin-bottom: var(--space-1);
        }

        .export-info-card__value {
            font-size: var(--text-lg);
            font-weight: var(--weight-semibold);
            color: var(--color-text-primary);
        }

        /* Export Options */
        .export-options {
            display: grid;
            gap: var(--space-3);
        }

        .export-option {
            display: flex;
            align-items: center;
            gap: var(--space-4);
            padding: var(--space-4);
            background: var(--color-surface-glass-dark);
            border: 1px solid var(--color-border-subtle);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition:
                border-color var(--transition-fast),
                background-color var(--transition-fast);
        }

        .export-option:hover {
            border-color: var(--color-border-default);
            background: var(--color-surface-glass);
        }

        .export-option.selected {
            border-color: var(--color-primary);
            background: var(--color-primary-muted);
        }

        .export-option__icon {
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--color-bg-elevated);
            border-radius: var(--radius-md);
            color: var(--color-text-secondary);
        }

        .export-option.selected .export-option__icon {
            background: var(--color-primary);
            color: white;
        }

        .export-option__content {
            flex: 1;
        }

        .export-option__title {
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--color-text-primary);
            margin-bottom: var(--space-1);
        }

        .export-option__description {
            font-size: var(--text-xs);
            color: var(--color-text-tertiary);
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            gap: var(--space-4);
            padding: var(--space-5);
            border-top: 1px solid var(--color-border-subtle);
            margin-top: auto;
        }

        .nav-buttons__left,
        .nav-buttons__right {
            display: flex;
            gap: var(--space-3);
        }

        /* =====================================================================
           RIGHT PANEL CONTROLS
           ===================================================================== */

        .right-panel-section {
            display: none;
        }

        .right-panel-section.active {
            display: block;
        }

        /* Guidelines List */
        .guidelines-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }

        .guidelines-list__item {
            display: flex;
            align-items: flex-start;
            gap: var(--space-3);
            font-size: var(--text-sm);
            color: var(--color-text-secondary);
        }

        .guidelines-list__icon {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
            color: var(--color-success);
        }

        /* Style Summary */
        .style-summary {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }

        .style-summary__row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-3);
            background: var(--color-surface-glass-dark);
            border-radius: var(--radius-sm);
        }

        .style-summary__label {
            font-size: var(--text-sm);
            color: var(--color-text-tertiary);
        }

        .style-summary__value {
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--color-text-primary);
        }

        /* Color Preview */
        .color-preview {
            display: flex;
            gap: var(--space-2);
            margin-top: var(--space-3);
        }

        .color-preview__swatch {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-sm);
            border: 2px solid var(--color-border-subtle);
        }

        /* Slider with Value */
        .slider-group {
            margin-bottom: var(--space-5);
        }

        .slider-group__header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-2);
        }

        .slider-group__label {
            font-size: var(--text-sm);
            color: var(--color-text-secondary);
        }

        .slider-group__value {
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--color-text-primary);
            font-variant-numeric: tabular-nums;
        }

        /* Position Selector */
        .position-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-2);
            padding: var(--space-3);
            background: var(--color-bg-elevated);
            border-radius: var(--radius-md);
        }

        .position-btn {
            aspect-ratio: 1;
            background: var(--color-surface-glass-dark);
            border: 1px solid transparent;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .position-btn:hover {
            background: var(--color-surface-glass);
        }

        .position-btn.active {
            background: var(--color-primary-muted);
            border-color: var(--color-primary);
        }

        /* Safe Frame Toggle */
        .safe-frame-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-3);
            background: var(--color-surface-glass-dark);
            border-radius: var(--radius-md);
        }

        .safe-frame-toggle__label {
            font-size: var(--text-sm);
            color: var(--color-text-secondary);
        }

        /* =====================================================================
           RESPONSIVE ADJUSTMENTS
           ===================================================================== */

        @media (max-width: 768px) {
            .top-bar {
                padding: 0 var(--space-4);
            }

            .top-bar__title {
                display: none;
            }

            .upload-zone {
                padding: var(--space-6);
                min-height: 200px;
            }

            .niche-grid,
            .expression-grid,
            .creator-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Top Bar -->
    <header class="top-bar">
        <div class="top-bar__left">
            <a href="/" class="logo">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="tbPlayGradientV3" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#8B5CF6"/>
                            <stop offset="100%" style="stop-color:#3B82F6"/>
                        </linearGradient>
                    </defs>
                    <rect x="0" y="0" width="32" height="32" rx="8" fill="url(#tbPlayGradientV3)"/>
                    <path d="M12 8L24 16L12 24V8Z" fill="white"/>
                    <circle cx="26" cy="6" r="2" fill="#FFD700"/>
                </svg>
                <span class="logo__text"><span style="color:#fff">Thumbnail</span><span style="color:#8B5CF6">Builder</span><span style="color:#6B7280;font-size:0.75em">.app</span></span>
            </a>
            <span class="top-bar__title">New Thumbnail Session</span>
        </div>
        <div class="top-bar__right">
            <button class="btn btn-ghost" id="btn-save-draft">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/>
                    <polyline points="17,21 17,13 7,13 7,21"/>
                    <polyline points="7,3 7,8 15,8"/>
                </svg>
                Save Draft
            </button>
        </div>
    </header>

    <!-- Main App Layout -->
    <div class="app-layout">
        <!-- Left Sidebar - Stepper -->
        <aside class="sidebar-left">
            <div class="stepper-panel glass-panel">
                <div class="stepper-header">
                    <span class="stepper-header__title">Build Steps</span>
                </div>
                <nav class="stepper" role="navigation" aria-label="Progress">
                    <button class="step step--active" data-step="1" type="button">
                        <div class="step__indicator">1</div>
                        <div class="step__content">
                            <div class="step__title">Face</div>
                            <div class="step__description">Upload your photos</div>
                        </div>
                    </button>
                    <button class="step" data-step="2" type="button">
                        <div class="step__indicator">2</div>
                        <div class="step__content">
                            <div class="step__title">Style</div>
                            <div class="step__description">Choose your look</div>
                        </div>
                    </button>
                    <button class="step" data-step="3" type="button">
                        <div class="step__indicator">3</div>
                        <div class="step__content">
                            <div class="step__title">Text</div>
                            <div class="step__description">Add content & text</div>
                        </div>
                    </button>
                    <button class="step" data-step="4" type="button">
                        <div class="step__indicator">4</div>
                        <div class="step__content">
                            <div class="step__title">Generate</div>
                            <div class="step__description">Create thumbnails</div>
                        </div>
                    </button>
                    <button class="step" data-step="5" type="button">
                        <div class="step__indicator">5</div>
                        <div class="step__content">
                            <div class="step__title">Export</div>
                            <div class="step__description">Download & share</div>
                        </div>
                    </button>
                </nav>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content" id="main-content">
            <!-- Preview Section -->
            <section class="preview-section glass-panel">
                <div class="preview-canvas">
                    <div class="preview-frame" id="preview-frame">
                        <!-- Placeholder -->
                        <div class="preview-frame__placeholder" id="preview-placeholder">
                            <svg class="preview-frame__placeholder-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <rect x="3" y="3" width="18" height="18" rx="2"/>
                                <circle cx="8.5" cy="8.5" r="1.5"/>
                                <path d="M21 15l-5-5L5 21"/>
                            </svg>
                            <span class="preview-frame__placeholder-text">Your thumbnail preview will appear here</span>
                        </div>

                        <!-- Preview Image (hidden initially) -->
                        <img class="preview-frame__image" id="preview-image" src="" alt="Thumbnail preview" style="display: none;">

                        <!-- Safe Frame Overlay -->
                        <div class="safe-frame-overlay" id="safe-frame-overlay">
                            <div class="safe-frame-border"></div>
                            <div class="safe-frame-corner safe-frame-corner--tl"></div>
                            <div class="safe-frame-corner safe-frame-corner--tr"></div>
                            <div class="safe-frame-corner safe-frame-corner--bl"></div>
                            <div class="safe-frame-corner safe-frame-corner--br"></div>
                            <div class="danger-zone">
                                <span class="danger-zone__label">Duration</span>
                            </div>
                        </div>

                        <!-- Text Preview Overlay -->
                        <div class="text-preview-overlay">
                            <span class="text-preview-overlay__text" id="text-preview"></span>
                        </div>

                        <!-- Thumbnail Loading Component -->
                        <div class="thumbnail-loading" id="thumbnail-loading" role="status" aria-live="polite" aria-label="Generating thumbnails">
                            <!-- Generating State (default) -->
                            <div class="thumbnail-loading__generating" id="loading-generating">
                                <!-- Metamorphosis Animation -->
                                <div class="thumbnail-loading__metamorphosis">
                                    <div class="thumbnail-loading__blocks">
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                    </div>
                                    <div class="thumbnail-loading__glow-frame"></div>
                                </div>

                                <!-- Progress Messages -->
                                <div class="thumbnail-loading__messages" id="loading-messages">
                                    <span class="thumbnail-loading__message active" data-step="0">Analyzing your prompt...</span>
                                    <span class="thumbnail-loading__message" data-step="1">Composing the scene...</span>
                                    <span class="thumbnail-loading__message" data-step="2">Generating your face...</span>
                                    <span class="thumbnail-loading__message" data-step="3">Rendering background...</span>
                                    <span class="thumbnail-loading__message" data-step="4">Adding text overlay...</span>
                                    <span class="thumbnail-loading__message" data-step="5">Polishing final image...</span>
                                </div>

                                <!-- Variant Indicators -->
                                <div class="thumbnail-loading__variants" id="loading-variants"></div>

                                <!-- Progress Bar -->
                                <div class="thumbnail-loading__progress">
                                    <div class="thumbnail-loading__progress-track">
                                        <div class="thumbnail-loading__progress-fill" id="loading-progress-fill"></div>
                                    </div>
                                </div>

                                <!-- Cancel Button -->
                                <button class="thumbnail-loading__cancel" id="loading-cancel" type="button">
                                    Cancel
                                </button>
                            </div>

                            <!-- Success State -->
                            <div class="thumbnail-loading__success" id="loading-success" style="display: none;">
                                <div class="thumbnail-loading__metamorphosis">
                                    <div class="thumbnail-loading__glow-frame"></div>
                                </div>
                                <div class="thumbnail-loading__success-check">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                        <polyline points="20 6 9 17 4 12"/>
                                    </svg>
                                </div>
                                <span class="thumbnail-loading__message active">Thumbnails ready!</span>
                            </div>

                            <!-- Error State -->
                            <div class="thumbnail-loading__error" id="loading-error" style="display: none;">
                                <div class="thumbnail-loading__metamorphosis">
                                    <div class="thumbnail-loading__blocks">
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                        <div class="thumbnail-loading__block"></div>
                                    </div>
                                    <div class="thumbnail-loading__glow-frame"></div>
                                </div>
                                <svg class="thumbnail-loading__error-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <line x1="12" y1="8" x2="12" y2="12"/>
                                    <line x1="12" y1="16" x2="12.01" y2="16"/>
                                </svg>
                                <h3 class="thumbnail-loading__error-title">Generation Failed</h3>
                                <p class="thumbnail-loading__error-message" id="loading-error-message">Something went wrong. Please try again.</p>
                                <button class="thumbnail-loading__retry" id="loading-retry" type="button">
                                    Try Again
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Variant Strip -->
                <div class="variant-strip-section glass-panel-dark">
                    <div class="variant-strip-header">
                        <span class="variant-strip-header__title">Generated Variants</span>
                        <span class="variant-strip-header__count" id="variant-count">0 variants</span>
                    </div>
                    <div class="variant-strip" id="variant-strip">
                        <div class="variant-strip__empty">
                            <svg class="variant-strip__empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <rect x="3" y="3" width="18" height="18" rx="2"/>
                                <path d="M12 8v8M8 12h8"/>
                            </svg>
                            <span class="variant-strip__empty-text">Variants will appear here after generation</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Step Content Panels -->
            <div class="step-panels">
                <!-- Step 1: Face Upload -->
                <div class="step-panel active" id="panel-step-1">
                    <input type="file" id="face-input" multiple accept="image/*" style="display: none;">
                    <div class="upload-zone" id="upload-zone">
                        <svg class="upload-zone__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                            <polyline points="17 8 12 3 7 8"/>
                            <line x1="12" y1="3" x2="12" y2="15"/>
                        </svg>
                        <h3 class="upload-zone__title">Upload 3-10 photos of your face</h3>
                        <p class="upload-zone__subtitle">Drag and drop your photos here, or click to browse</p>
                        <span class="upload-zone__hint">Supports JPG, PNG, WebP up to 10MB each</span>
                    </div>
                    <div class="face-gallery" id="face-gallery"></div>
                    <div class="face-count" id="face-count" style="display: none;">
                        <div class="face-count__progress">
                            <div class="face-count__bar" id="face-count-bar" style="width: 0%"></div>
                        </div>
                        <span class="face-count__text" id="face-count-text">0/3 minimum</span>
                    </div>
                </div>

                <!-- Step 2: Style Selection -->
                <div class="step-panel" id="panel-step-2">
                    <!-- Niche Selection -->
                    <div class="style-section">
                        <h3 class="style-section__title">Content Niche</h3>
                        <div class="niche-grid" id="niche-grid">
                            <div class="niche-card selected" data-niche="reaction">
                                <span class="niche-card__icon"></span>
                                <span class="niche-card__label">Reaction</span>
                            </div>
                            <div class="niche-card" data-niche="gaming">
                                <span class="niche-card__icon"></span>
                                <span class="niche-card__label">Gaming</span>
                            </div>
                            <div class="niche-card" data-niche="tech">
                                <span class="niche-card__icon"></span>
                                <span class="niche-card__label">Tech</span>
                            </div>
                            <div class="niche-card" data-niche="finance">
                                <span class="niche-card__icon"></span>
                                <span class="niche-card__label">Finance</span>
                            </div>
                            <div class="niche-card" data-niche="fitness">
                                <span class="niche-card__icon"></span>
                                <span class="niche-card__label">Fitness</span>
                            </div>
                            <div class="niche-card" data-niche="beauty">
                                <span class="niche-card__icon"></span>
                                <span class="niche-card__label">Beauty</span>
                            </div>
                            <div class="niche-card" data-niche="cooking">
                                <span class="niche-card__icon"></span>
                                <span class="niche-card__label">Cooking</span>
                            </div>
                            <div class="niche-card" data-niche="travel">
                                <span class="niche-card__icon"></span>
                                <span class="niche-card__label">Travel</span>
                            </div>
                            <div class="niche-card" data-niche="tutorial">
                                <span class="niche-card__icon"></span>
                                <span class="niche-card__label">Tutorial</span>
                            </div>
                            <div class="niche-card" data-niche="podcast">
                                <span class="niche-card__icon"></span>
                                <span class="niche-card__label">Podcast</span>
                            </div>
                        </div>
                    </div>

                    <!-- Expression Selection -->
                    <div class="style-section">
                        <h3 class="style-section__title">Your Expression</h3>
                        <div class="expression-grid" id="expression-grid">
                            <div class="expression-card selected" data-expression="excited">
                                <span class="expression-card__emoji"></span>
                                <span class="expression-card__label">Excited</span>
                            </div>
                            <div class="expression-card" data-expression="shocked">
                                <span class="expression-card__emoji"></span>
                                <span class="expression-card__label">Shocked</span>
                            </div>
                            <div class="expression-card" data-expression="curious">
                                <span class="expression-card__emoji"></span>
                                <span class="expression-card__label">Curious</span>
                            </div>
                            <div class="expression-card" data-expression="angry">
                                <span class="expression-card__emoji"></span>
                                <span class="expression-card__label">Angry</span>
                            </div>
                            <div class="expression-card" data-expression="confident">
                                <span class="expression-card__emoji"></span>
                                <span class="expression-card__label">Confident</span>
                            </div>
                            <div class="expression-card" data-expression="determined">
                                <span class="expression-card__emoji"></span>
                                <span class="expression-card__label">Determined</span>
                            </div>
                            <div class="expression-card" data-expression="surprised">
                                <span class="expression-card__emoji"></span>
                                <span class="expression-card__label">Surprised</span>
                            </div>
                            <div class="expression-card" data-expression="happy">
                                <span class="expression-card__emoji"></span>
                                <span class="expression-card__label">Happy</span>
                            </div>
                        </div>
                    </div>

                    <!-- Creator Style Selection -->
                    <div class="style-section">
                        <h3 class="style-section__title">Creator Style</h3>
                        <div class="creator-grid" id="creator-grid">
                            <div class="creator-card selected" data-style="auto">
                                <div class="creator-card__avatar">A</div>
                                <span class="creator-card__name">Auto</span>
                            </div>
                            <div class="creator-card" data-style="mrbeast">
                                <div class="creator-card__avatar">MB</div>
                                <span class="creator-card__name">MrBeast</span>
                            </div>
                            <div class="creator-card" data-style="hormozi">
                                <div class="creator-card__avatar">AH</div>
                                <span class="creator-card__name">Hormozi</span>
                            </div>
                            <div class="creator-card" data-style="gadzhi">
                                <div class="creator-card__avatar">GS</div>
                                <span class="creator-card__name">Gadzhi</span>
                            </div>
                            <div class="creator-card" data-style="magnates">
                                <div class="creator-card__avatar">MG</div>
                                <span class="creator-card__name">Magnates</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Text & Content -->
                <div class="step-panel" id="panel-step-3">
                    <div class="content-form">
                        <!-- Brief Textarea -->
                        <div class="input-group">
                            <div class="input-group__label">
                                <span class="input-group__label-text">Describe Your Scene</span>
                            </div>
                            <textarea
                                id="brief-input"
                                class="input-glass textarea-glass"
                                placeholder="Describe your thumbnail idea... e.g., 'Me looking shocked at a huge stack of money, dark dramatic background'"
                                rows="3"
                            ></textarea>
                            <span class="input-group__hint">Be specific about the setting, objects, and mood you want</span>
                        </div>

                        <!-- Quick Scene Suggestions -->
                        <div class="input-group">
                            <span class="input-group__label-text">Scene Ideas</span>
                            <div class="chip-group" id="scene-chips">
                                <button class="chip" data-append="luxury penthouse background">Luxury</button>
                                <button class="chip" data-append="jungle adventure setting">Jungle</button>
                                <button class="chip" data-append="neon city skyline">City</button>
                                <button class="chip" data-append="clean studio setup">Studio</button>
                                <button class="chip" data-append="dramatic spotlight">Spotlight</button>
                                <button class="chip" data-append="space background">Space</button>
                                <button class="chip" data-append="mountain landscape">Mountains</button>
                                <button class="chip" data-append="beach sunset">Beach</button>
                            </div>
                        </div>

                        <!-- Thumbnail Text -->
                        <div class="input-group">
                            <div class="input-group__label">
                                <span class="input-group__label-text">Thumbnail Text (1-4 words)</span>
                                <span class="input-group__counter" id="text-counter">0/30</span>
                            </div>
                            <input
                                type="text"
                                id="thumbnail-text"
                                class="input-glass"
                                placeholder="e.g., HOLY DROP, $50K, WHY??"
                                maxlength="30"
                            >
                            <span class="input-group__hint">This bold text will be overlaid on your thumbnail</span>
                            <div class="input-group__warning" id="text-warning" style="display: none;">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/>
                                    <line x1="12" y1="9" x2="12" y2="13"/>
                                    <line x1="12" y1="17" x2="12.01" y2="17"/>
                                </svg>
                                <span>Long text may be hard to read on thumbnails</span>
                            </div>
                        </div>

                        <!-- Logo Section -->
                        <div class="logo-section">
                            <div class="logo-section__header">
                                <span class="logo-section__title">Brand Logos (Optional)</span>
                                <span class="text-xs text-tertiary">Max 3</span>
                            </div>
                            <div class="logo-gallery" id="logo-gallery">
                                <input type="file" id="logo-input" accept="image/*" style="display: none;">
                                <div class="logo-card logo-card--add" id="add-logo-btn">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="12" y1="5" x2="12" y2="19"/>
                                        <line x1="5" y1="12" x2="19" y2="12"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="logo-position-presets" id="logo-positions" style="display: none;">
                                <button class="position-preset active" data-position="top-left">Top Left</button>
                                <button class="position-preset" data-position="top-right">Top Right</button>
                                <button class="position-preset" data-position="bottom-left">Bottom Left</button>
                                <button class="position-preset" data-position="bottom-right">Bottom Right</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Generate -->
                <div class="step-panel" id="panel-step-4">
                    <div id="generate-initial" class="generate-section">
                        <h2 class="generate-section__title">Ready to Generate</h2>
                        <p class="generate-section__subtitle">Click the button below to create your AI-powered thumbnails</p>
                        <button class="btn btn-primary btn-lg generate-button pulse-glow" id="btn-generate">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                            </svg>
                            Generate Thumbnails
                        </button>
                    </div>
                    <div id="generate-progress" class="generation-progress" style="display: none;">
                        <div class="generation-progress__spinner"></div>
                        <div class="generation-progress__status" id="progress-status">Generating...</div>
                        <div class="generation-progress__substatus" id="progress-substatus">This may take a moment</div>
                        <div class="generation-progress__bar">
                            <div class="generation-progress__fill" id="progress-fill" style="width: 0%"></div>
                        </div>
                    </div>
                    <div id="generate-results" class="variants-grid" style="display: none;"></div>
                </div>

                <!-- Step 5: Export -->
                <div class="step-panel" id="panel-step-5">
                    <div class="export-preview" id="export-preview">
                        <div class="export-preview__image-wrapper">
                            <img class="export-preview__image" id="export-image" src="" alt="Selected thumbnail">
                        </div>
                        <div class="export-preview__info">
                            <div class="export-info-card">
                                <div class="export-info-card__label">Resolution</div>
                                <div class="export-info-card__value" id="export-resolution">1920 x 1080</div>
                            </div>
                            <div class="export-info-card">
                                <div class="export-info-card__label">File Size</div>
                                <div class="export-info-card__value" id="export-filesize">~500 KB</div>
                            </div>
                            <div class="export-info-card">
                                <div class="export-info-card__label">Format</div>
                                <div class="export-info-card__value">PNG</div>
                            </div>
                        </div>
                    </div>
                    <div class="export-options">
                        <div class="export-option selected" data-export="full">
                            <div class="export-option__icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                    <polyline points="7 10 12 15 17 10"/>
                                    <line x1="12" y1="15" x2="12" y2="3"/>
                                </svg>
                            </div>
                            <div class="export-option__content">
                                <div class="export-option__title">Download Full Resolution</div>
                                <div class="export-option__description">1920x1080 PNG for YouTube</div>
                            </div>
                        </div>
                        <div class="export-option" data-export="optimized">
                            <div class="export-option__icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                    <polyline points="7 10 12 15 17 10"/>
                                    <line x1="12" y1="15" x2="12" y2="3"/>
                                </svg>
                            </div>
                            <div class="export-option__content">
                                <div class="export-option__title">Download Optimized</div>
                                <div class="export-option__description">1280x720 compressed for faster loading</div>
                            </div>
                        </div>
                        <div class="export-option" data-export="titletester">
                            <div class="export-option__icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M22 2L11 13"/>
                                    <path d="M22 2l-7 20-4-9-9-4 20-7z"/>
                                </svg>
                            </div>
                            <div class="export-option__content">
                                <div class="export-option__title">Export to TitleTesterPro</div>
                                <div class="export-option__description">Send directly for A/B testing</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="nav-buttons glass-panel-dark">
                <div class="nav-buttons__left">
                    <button class="btn btn-secondary" id="btn-back" disabled>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="15 18 9 12 15 6"/>
                        </svg>
                        Back
                    </button>
                </div>
                <div class="nav-buttons__right">
                    <button class="btn btn-primary" id="btn-next">
                        Continue
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"/>
                        </svg>
                    </button>
                </div>
            </div>
        </main>

        <!-- Right Sidebar - Controls -->
        <aside class="sidebar-right">
            <div class="control-panel glass-panel">
                <!-- Step 1: Face Guidelines -->
                <div class="right-panel-section active" id="right-panel-1">
                    <div class="control-panel__header">
                        <h3 class="control-panel__title">Face Upload</h3>
                        <span class="control-panel__badge">Step 1</span>
                    </div>
                    <div class="control-section">
                        <span class="control-section__label">Guidelines</span>
                        <ul class="guidelines-list">
                            <li class="guidelines-list__item">
                                <svg class="guidelines-list__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                                <span>Front-facing & side profiles</span>
                            </li>
                            <li class="guidelines-list__item">
                                <svg class="guidelines-list__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                                <span>Different expressions (shocked, happy, angry)</span>
                            </li>
                            <li class="guidelines-list__item">
                                <svg class="guidelines-list__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                                <span>Bright, clear lighting</span>
                            </li>
                            <li class="guidelines-list__item">
                                <svg class="guidelines-list__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                                <span>Plain background if possible</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Step 2: Style Details -->
                <div class="right-panel-section" id="right-panel-2">
                    <div class="control-panel__header">
                        <h3 class="control-panel__title">Style Details</h3>
                        <span class="control-panel__badge">Step 2</span>
                    </div>
                    <div class="control-section">
                        <span class="control-section__label">Selection Summary</span>
                        <div class="style-summary">
                            <div class="style-summary__row">
                                <span class="style-summary__label">Niche</span>
                                <span class="style-summary__value" id="summary-niche">Reaction</span>
                            </div>
                            <div class="style-summary__row">
                                <span class="style-summary__label">Expression</span>
                                <span class="style-summary__value" id="summary-expression">Excited</span>
                            </div>
                            <div class="style-summary__row">
                                <span class="style-summary__label">Creator Style</span>
                                <span class="style-summary__value" id="summary-creator">Auto</span>
                            </div>
                        </div>
                    </div>
                    <div class="control-section">
                        <span class="control-section__label">Color Preview</span>
                        <div class="color-preview" id="color-preview">
                            <div class="color-preview__swatch" style="background: #FF5500;"></div>
                            <div class="color-preview__swatch" style="background: #1A1A24;"></div>
                            <div class="color-preview__swatch" style="background: #FFD700;"></div>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Text Controls -->
                <div class="right-panel-section" id="right-panel-3">
                    <div class="control-panel__header">
                        <h3 class="control-panel__title">Text Controls</h3>
                        <span class="control-panel__badge">Step 3</span>
                    </div>

                    <!-- Font Size Slider -->
                    <div class="control-section">
                        <div class="slider-group">
                            <div class="slider-group__header">
                                <span class="slider-group__label">Font Size</span>
                                <span class="slider-group__value" id="font-size-value">100%</span>
                            </div>
                            <div class="slider-control">
                                <input type="range" class="slider-control__input" id="font-size-slider" min="50" max="150" value="100">
                            </div>
                        </div>
                    </div>

                    <!-- Subject Scale Slider -->
                    <div class="control-section">
                        <div class="slider-group">
                            <div class="slider-group__header">
                                <span class="slider-group__label">Subject Scale</span>
                                <span class="slider-group__value" id="subject-scale-value">100%</span>
                            </div>
                            <div class="slider-control">
                                <input type="range" class="slider-control__input" id="subject-scale-slider" min="50" max="150" value="100">
                            </div>
                        </div>
                    </div>

                    <!-- Subject Position -->
                    <div class="control-section">
                        <span class="control-section__label">Subject Position</span>
                        <div class="position-grid" id="subject-position-grid">
                            <button class="position-btn" data-position="top-left"></button>
                            <button class="position-btn" data-position="top-center"></button>
                            <button class="position-btn" data-position="top-right"></button>
                            <button class="position-btn" data-position="middle-left"></button>
                            <button class="position-btn active" data-position="middle-center"></button>
                            <button class="position-btn" data-position="middle-right"></button>
                            <button class="position-btn" data-position="bottom-left"></button>
                            <button class="position-btn" data-position="bottom-center"></button>
                            <button class="position-btn" data-position="bottom-right"></button>
                        </div>
                    </div>

                    <!-- Outline Toggle -->
                    <div class="control-section">
                        <label class="toggle-switch">
                            <input type="checkbox" class="toggle-switch__input" id="outline-toggle">
                            <span class="toggle-switch__track">
                                <span class="toggle-switch__thumb"></span>
                            </span>
                            <span class="toggle-switch__label">Text Outline</span>
                        </label>
                    </div>

                    <!-- Safe Frame Toggle -->
                    <div class="control-section">
                        <div class="safe-frame-toggle">
                            <span class="safe-frame-toggle__label">Show Safe Frame</span>
                            <label class="toggle-switch">
                                <input type="checkbox" class="toggle-switch__input" id="safe-frame-toggle">
                                <span class="toggle-switch__track">
                                    <span class="toggle-switch__thumb"></span>
                                </span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Generation Settings -->
                <div class="right-panel-section" id="right-panel-4">
                    <div class="control-panel__header">
                        <h3 class="control-panel__title">Generation</h3>
                        <span class="control-panel__badge">Step 4</span>
                    </div>
                    <div class="control-section">
                        <span class="control-section__label">Variant Count</span>
                        <div class="slider-group">
                            <div class="slider-group__header">
                                <span class="slider-group__label">Number of variants</span>
                                <span class="slider-group__value" id="variant-count-value">4</span>
                            </div>
                            <div class="slider-control">
                                <input type="range" class="slider-control__input" id="variant-count-slider" min="2" max="6" value="4">
                            </div>
                        </div>
                    </div>
                    <div class="control-section">
                        <span class="control-section__label">Generation Summary</span>
                        <div class="style-summary">
                            <div class="style-summary__row">
                                <span class="style-summary__label">Faces</span>
                                <span class="style-summary__value" id="summary-faces">0 uploaded</span>
                            </div>
                            <div class="style-summary__row">
                                <span class="style-summary__label">Style</span>
                                <span class="style-summary__value" id="summary-style">Reaction</span>
                            </div>
                            <div class="style-summary__row">
                                <span class="style-summary__label">Text</span>
                                <span class="style-summary__value" id="summary-text">Not set</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 5: Export Options -->
                <div class="right-panel-section" id="right-panel-5">
                    <div class="control-panel__header">
                        <h3 class="control-panel__title">Export</h3>
                        <span class="control-panel__badge">Step 5</span>
                    </div>
                    <div class="control-section">
                        <span class="control-section__label">Selected Variant</span>
                        <div class="style-summary">
                            <div class="style-summary__row">
                                <span class="style-summary__label">Variant</span>
                                <span class="style-summary__value" id="summary-variant">A</span>
                            </div>
                        </div>
                    </div>
                    <div class="control-section">
                        <button class="btn btn-primary w-full" id="btn-download">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                <polyline points="7 10 12 15 17 10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                            Download PNG
                        </button>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <script src="app-v3.js"></script>
</body>
</html>
